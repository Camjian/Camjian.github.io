---
layout: post
title: "BSC 和 Heco 上的 DeFi 生态究竟如何？让我们拿数据说话"
date: 2021-03-25
description: "BSC 和 Heco 上的 DeFi 生态究竟如何？让我们拿数据说话"
tag: DeFi
---   
```
DeFi 应用有如试金石一般再次暴露出以太坊公链的沉疴，
以致出现向 BSC 和 Heco 链分流的现象。让我们用 TPS 和 Gas 费
这两个技术指标对以太坊、BSC 和 Heco 三条链进行估算对比，
看看各自生态究竟如何。
```

**撰文：曹一新，就职于 HashKey Capital Research**
**审核：邹传伟，万向区块链首席经济学家**

## DeFi 生态的分流现象
自 2021 年初以来，以太坊上公链的 DeFi 生态发展趋势放缓，鲜有现象级应用问世，总锁仓量（TVL）在 350 至 450 亿美元区间震荡，作为底层基础设施的以太坊公链手续费高、可扩展性差等问题被再三诟病。

![](/images/posts/defi/0325.01.jpg)
图 1. 以太坊上 DeFi 生态规模增长曲线（数据来自 Defipulse）

事实上，剔除市场价格上行因素，以 ETH 计量的 TVL 在去年四季度起就开始下滑。与此同时，去年三、四季度上线的币安智能链（BSC）和火币生态链（Heco）逐步建立起 DeFi 生态，并借机从以太坊引流。

今年一季度这两条链上的 DeFi 应用热度不断攀升，根据 DeFiBox 的数据（3 月 15 日），TVL 已分别达到 133.2 亿美元（BSC）和 62.7 亿美元（Heco）。同为 DEX 板块的明星项目 Pancake 和 MDEX 的 TVL 已经达到 Uniswap 同等数量级；从日成交量数据看（如表 1 所示），Pancake 和 MDEX 比 Uniswap 高出一个数量级。

由公式（1）可知，日成交量增量的贡献可分解为交易处理效率的提高和平均单笔交易的成交量增量。而下文将估算出 BSC 和 Heco 链的实际 TPS 相对以太坊分别提高了 2.1 倍和 2.8 倍，不考虑存在虚假交易情况下，平均单笔交易的成交量大约提高 2.1 倍和 3.6 倍。

![](/images/posts/defi/0325.02.jpg)

![](/images/posts/defi/0325.03.jpg)
表 1. 三条公链代表性 DEX 市场规模对比（3 月 15 日）

从具体的 DeFi 项目分布看（如图 2），DEX 和借贷板块是 DeFi 生态发展较为成熟的业务，以太坊上 DeFi 生态的项目以这两种业务为主。借贷板块项目数虽少，但平均单个项目的锁仓量最多，头部效应明显；相反地，衍生品板块项目数量较多，而单项目锁仓量较少，一方面说明该板块竞争程度高，另一方面反映目前 DeFi 生态的衍生品赛道还存在诸多障碍，尚未形成可观的规模。

有趣的是，BSC 链上的 DEX、借贷和收益聚合项目的项目数和锁仓量的分布与以太坊 DeFi 生态有类似特征，只不过规模相对缩小；而 Heco 链上的项目以 DEX 和收益聚合居多，单项目锁仓量少。BSC 和 Heco 上的衍生品板块发展均比较有限。

![](/images/posts/defi/0325.04.jpg)
图 2. 三条链 DeFi 生态各板块项目分布（数据来自 DeFiBox）

## 技术指标对比
上述分流现象切实反映出以太坊公链现有性能在支撑 DeFi 生态向更大规模应用迈进过程中的捉襟见肘，这里两个关键性能指标是：

* TPS （关系到业务运营时效）
* Gas 费（关系到业务运营成本）
以太坊公链存在这两个性能瓶颈有两个前提，即它首先保障了高度的：

* 去中心化程度
* 安全性
而在 BSC 或 Heco 链上运转的 DeFi 生态则是由头部交易所背书、以交易所用户群为基础发展起来的，在牺牲去中心化程度的情况下提高可扩展性，为 DeFi 玩家另辟一个手续费低廉、不拥堵的交易场所。

## TPS 指标对比
单就 TPS 而言，BSC 和 Heco 链均依托于以太坊开源技术，并对共识算法加以修改使得出块速度从平均 15 秒缩减至 3 秒，同时将每个区块的 Gas Limit 提高了 2.4 倍。需注意的是，Ethereum 和 Heco 链的 Gas Limit 会随着挖矿难度调节机制上下浮动，而目前 BSC 链的 Gas Limit 基本维持在 3000 万左右。我们可以通过每个区块的 Gas Limit、单笔交易平均消耗 Gas 和平均出块时间这三个数据估算各链实际能达到的 TPS 上限（详见公式（2）及表 2 数据）。

![](/images/posts/defi/0325.05.jpg)

根据区块链浏览器最近 30 天（2 月 13 日至 3 月 14 日）的统计数据，我们可以通过日均交易数、日均消耗 Gas 估算单笔交易平均消耗 Gas。若按以太坊目前单笔交易平均消耗 Gas （64K）为标准估算，BSC 和 Heco 的 TPS 能从 13 提高至 156。但实际上这两条链单笔交易平均消耗 Gas 远高于 64K，若按 BSC 的平均值（135K）为标准，实际能承受的 TPS 缩减一半。

![](/images/posts/defi/0325.06.jpg)
表 2. 三条公链技术指标对比（2021-3-15）

另一方面，通过日均 Gas 使用率，我们可以探测各条链的拥堵情况。相较于以太坊满负荷运行，目前 BSC 链和 Heco 链的 Gas 还没有进入满负荷状态，故而还没有拥堵体验，但从实际可支持的 TPS 数据可侧面反映出其实这两条区块链也只能杯水车薪地支撑非常有限的生态规模，对于处理更加复杂的智能合约相关交易同样面临以太坊需要解决的可扩展性问题。

## 区块链使用成本分析
DeFi 业务在区块链上运行和维护需要花费一定成本，这里只讨论归因至区块链本身的成本。

### 一次性成本

一次性成本可能包括 Dapp 开发、调试和维护升级成本。而在对比不同区块链的使用成本时，我们重点关注迁移成本，即由于底层技术的差异导致项目方在一条目标链上部署和维护 Dapp 所需花费的额外成本。由于 BSC 和 Heco 直接将以太坊的底层技术和接口标准移植过来，对于开发者而言迁移成本非常低，对于 DeFi 项目方而言有动力将其业务低成本扩张到新平台来获取更多用户流量，对于以太坊的 DeFi 用户而言学习和对接门槛也较低。

### 经常性成本

另一方面，区块链上运行业务所需花费的经常性成本是链上交易手续费，主要对应于矿工进行共识和验证所需花费的计算、存储和带宽资源。以太坊黄皮书给出了一个非常详细的收费标准，不同类型的操作指令对应消耗不同数量的 Gas。目前没有找到公开资料说明 BSC 和 Heco 链对这一费用模型有所修改，姑且认为其沿用了同一费用模型。

从表 2 的数据来看，最近一个月 BSC 和 Heco 上的单笔交易平均消耗 Gas 数是以太坊上的 2~3 倍。一个合理的原因是 BSC 和 Heco 主要服务的是 DeFi 生态内与智能合约交互为主的复杂交易，这些复杂交易需要消耗比较多的 Gas，而以太坊除了支撑 DeFi 业务，本身还一直提供着由简单转账（21K Gas) 构成的支付网络服务。

通过粗略地统计三条链在同一时间段 500 条交易内简单转账交易的数量我们可以验证这一点（Ethereum 106 笔，BSC17 笔，Heco7 笔）。

而这三条链的每笔交易手续费都通过以下费用模型计算：

![](/images/posts/defi/0325.07.jpg)

其中 GasUsed 是每笔交易实际消耗的 Gas 数量，只与交易复杂度有关；GasPrice 是交易发送方对每单位 Gas 愿意支付的成本，又称「汽油费」，而该成本是以该区块链的功能代币为计价单位来计量的，故为了获得美元计价的手续费，还需乘以功能代币的市价 UtilityTokenPrice。

如表 3 所示，三条链的平均「汽油费」和功能代币美元价格的差异，导致用户对消耗同等区块链资源的一笔区块链交易所需支付的手续费千差万别（一笔消耗 21K Gas 的简单交易，三条链的平均手续费按美元计最低只需 $0.0024，最高需 $5.89）。后续研报我们将进一步对手续费进行归因分析并解释其上涨逻辑。

![](/images/posts/defi/0325.08.jpg)
表 3. 三条链近 30 天简单交易平均手续费对比（2 月 14 日至 3 月 15 日）

## DeFi 生态的「沙箱」
虽然在技术指标的对比之下，交易所链除了手续费低廉以外，实际上并没有展现出质变的优势，它还是能在市场中找到自己独有的定位。

就目前的发展来看，交易所链比较适合充当 DeFi 生态发展的「沙箱」。该「沙箱」高效模仿了以太坊的 DeFi 生态，无缝兼容 Metamask 等 DeFi 用户已熟悉的交互工具，并大幅降低参与门槛和交易成本，同时拥有较大规模的用户流量基础、成熟的宣传推广渠道及一站式交易平台，或对有低成本开发和测试产品需求的项目方和低净值用户具有长期吸引力。

其劣势在于，在缺乏成熟跨链通道情况下，BSC 或 Heco 的资产出入口主要由币安或火币中心化交易所把关，参与方需通过在中心化交易所进行相关资产的提现和充值操作完成资产的跨链转移。

理论上交易所充当了资产流通的中心化枢纽，可以为各自的链上资金安全做一层风险隔离保护，在项目方跑路、黑客攻击等情况发生时及时封锁涉黑资金流入交易所洗钱，但同时也让该生态内资产属性更偏向于强依赖于交易所兑付信用的积分代币。而事实上多起项目方跑路事件已然发生但未见妥善处理。一旦市场形成成熟的去中心化资产跨链流通渠道及多链并存的生态模式，想要实现中心化背书需要引入链上审查机制，否则，「沙箱」环境仍将在统一的公链标准下受到市场的评估和检视，而所谓的标准，可能也不仅局限于技术层面了。

## 总结与思考
综上所述，以太坊公链开足马力运行以支撑 DeFi 生态的发展，但在 DeFi 应用的试炼下再次暴露了一直没有解决的瓶颈问题。交易所链乘虚而入，靠治标不治本的方法临时弥补短板吸引流量。

目前的智能合约支持的金融业务还是非常简单的，从长远看，未来实现理想的 DeFi 业务要求的性能指标远不止于此，期待从真正意义上解决可扩展性问题的技术方案落地，拭目以待 Layer 2、以太坊 2.0 等技术方案能否带来质的改变。
